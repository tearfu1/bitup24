{"version":3,"file":"bitup-event-card.bundle.js","sources":["../src/bitup-event-card.js"],"sourcesContent":["import { Event, Tag, Type } from 'main.core';\n\nexport class BitupEventCard\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.container = document.getElementById(options.container);\n\t\tthis.render();\n\t}\n\n\tsetData(data)\n\t{\n\t\tthis.data = { ...this.data, ...data };\n\t\tthis.updateContent();\n\t}\n\n\tupdateContent()\n\t{\n\t\tif (this.element)\n\t\t{\n\t\t\tconst titleElement = this.element.querySelector('.bitup-event-card__title');\n\t\t\tconst dateElement = this.element.querySelector('.bitup-event-card__date');\n\t\t\tconst participantsElement = this.element.querySelector('.bitup-event-card__participants-count');\n\n\t\t\tif (titleElement && this.data.title)\n\t\t\t{\n\t\t\t\ttitleElement.textContent = this.data.title;\n\t\t\t}\n\n\t\t\tif (dateElement && this.data.date)\n\t\t\t{\n\t\t\t\tdateElement.textContent = this.data.date;\n\t\t\t}\n\n\t\t\tif (participantsElement && this.data.participantsCount !== undefined)\n\t\t\t{\n\t\t\t\tparticipantsElement.textContent = this.data.participantsCount;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetHasError(value)\n\t{\n\t\tthis.hasError = value;\n\t\tif (value === true)\n\t\t{\n\t\t\tthis.isLoading = false;\n\t\t}\n\t}\n\n\tisDisabled()\n\t{\n\t\treturn (\n\t\t\tthis.isLoading ||\n\t\t\t(this.data.title && this.data.title.trim() === '')\n\t\t);\n\t}\n\n\thandleClick()\n\t{\n\t\tif (!this.isDisabled())\n\t\t{\n\t\t\tthis.isLoading = true;\n\t\t\tthis.onUpdateError(false);\n\t\t\tthis.onAddTask();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.highlightErrors();\n\t}\n\n\thighlightErrors()\n\t{\n\t\tif (this.data.title && this.data.title.trim() === '')\n\t\t{\n\t\t\tthis.errorReason = '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º';\n\t\t\tconsole.warn('Title validation error:', this.errorReason);\n\t\t}\n\n\t\tthis.showPopup();\n\t}\n\n\tshowPopup()\n\t{\n\t\tconst removeHighlight = () => {\n\t\t\tthis.isPopupShown = false;\n\t\t\tEvent.unbind(window, 'keydown', removeHighlight);\n\t\t};\n\t\tEvent.bind(window, 'keydown', removeHighlight);\n\n\t\tthis.isPopupShown = true;\n\t}\n\n\trender()\n\t{\n\t\tconsole.log(this.container);\n\t\tthis.element = Tag.render`\n            <div class=\"bitup-event-card ${this.hasError ? 'bitup-event-card--error' : ''}\">\n                <div class=\"bitup-event-card__title\">${this.data.title || '–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è'}</div>\n                <div class=\"bitup-event-card__date\">${this.data.date || '–î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è'}</div>\n                <div class=\"bitup-event-card__participants\">\n                    <div class=\"bitup-event-card__participants-icon\">üë•</div>\n                    <div class=\"bitup-event-card__participants-count\">${this.data.participantsCount || 0}</div>\n                </div>\n                ${this.isLoading ? '<div class=\"bitup-event-card__loading\">–ó–∞–≥—Ä—É–∑–∫–∞...</div>' : ''}\n            </div>\n        `;\n\n\t\t// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n\t\tif (Type.isFunction(this.onAddTask))\n\t\t{\n\t\t\tthis.element.addEventListener('click', () => this.handleClick());\n\t\t}\n\n\t\tthis.container.appendChild(this.element);\n\t\tconsole.log(this.container);\n\t\treturn this.element;\n\t}\n\n\tdestroy()\n\t{\n\t\tif (this.element)\n\t\t{\n\t\t\tif (this.element.parentNode)\n\t\t\t{\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.element = null;\n\t\t}\n\t}\n}"],"names":["BitupEventCard","options","container","document","getElementById","render","data","updateContent","element","titleElement","querySelector","dateElement","participantsElement","title","textContent","date","participantsCount","undefined","value","hasError","isLoading","trim","isDisabled","onUpdateError","onAddTask","highlightErrors","errorReason","console","warn","showPopup","removeHighlight","isPopupShown","Event","unbind","window","bind","log","Tag","Type","isFunction","addEventListener","handleClick","appendChild","parentNode","removeChild"],"mappings":"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"}